Got a lot of help from  

http://beej.us/guide/bgnet/html/single/bgnet.html#getaddrinfo
